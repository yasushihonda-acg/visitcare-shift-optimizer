# Statement of Work (SOW) - 作業範囲記述書

## プロジェクト名
訪問介護シフト最適化システム (Phase 1: AI Logic Demo)
GCP Project ID: visitcare-shift-optimizer

## 1. プロジェクトの目的
訪問介護特有の複雑な制約（資格、相性、移動時間、担当継続性、夫婦連続対応）を考慮し、数理最適化技術を用いて「物理的に実行可能」かつ「効率的」なシフトを自動生成するデモシステムを構築する。
本フェーズでは**「ロジスティクス（移動とマッチング）の最適化」**に注力し、実用性を検証することをゴールとする。

## 2. スコープ (Scope)

### 2.1 開発対象機能
- **数理最適化エンジン**: PuLP 3.3.0 + CBCソルバーを用いた自動シフト生成ロジック（ADR-006）
- **データ基盤**: Firebase (Firestore) 上での利用者・スタッフ・オーダーデータの構造化
- **Webアプリケーション (Demo UI)**: シフト生成、ガントチャート表示、手動修正、リアルタイムバリデーション

### 2.2 データ要件（Seedデータ実装）
以下の属性を持つデモ用データを整備・投入する。
- **利用者**: 住所（緯度経度）、サービス種別（身体/生活/混合/予防/自費/障害/移送/重度訪問）、NG/推奨スタッフ、同一世帯連結ID
  - 拡張フィールド: あおぞらID、電話番号、担当居宅、相談支援事業所、担当ケアマネ、相談支援専門員
- **スタッフ**: 住所（緯度経度）、保有資格（介護福祉士等）、移動手段（車/自転車/徒歩）、研修状態（未経験/同行中/独り立ち）
  - 拡張フィールド: 社員番号、住所テキスト、電話番号
- **オーダー**: 週間基本パターン＋週次変動（キャンセル・追加）

### 2.3 対象外 (Out of Scope)
- 介護報酬請求（レセプト）データの生成・計算
- 既存システム（介ソル、カラカラ）とのAPIによる自動連携（CSV想定まで）
  - 外部連携ID（介ソルID・カカラID・CURA ID・あおぞらID）の保持のみ対応
  - 実際のデータ突合処理は将来フェーズ
- 介護報酬請求（レセプト）データの生成・計算（将来フェーズ）
- 既存システム（介ソル、カラカラ）とのAPI自動連携（外部連携IDの保持のみ対応済み）

> **以下は当初スコープ外だったが実装完了済み:**
> - RBAC 3役体系（admin / service_manager / helper）＋ Firestoreセキュリティルール（ADR-012, ADR-014）
> - `service_types` Firestoreコレクション + マスタ管理UI（PR #103-#105）

## 3. 成果物 (Deliverables)
1. **デモアプリケーション**: GCP/Firebase上で動作するWebシステム一式
2. **Seedデータセット**: 正常系（解ける）および異常系（制約過多で解けない）を含むCSVデータ
3. **検証レポート**: 制約（資格、移動、NG、夫婦固定）の遵守状況と、最適化計算のパフォーマンス評価

## 4. マイルストーン
- **Step 1**: データ設計完了・Seedデータ作成
- **Step 2**: 最適化エンジン（Python）の単体動作検証（Cloud Run）
- **Step 3**: UI実装・統合・バリデーション機能の実装
